extends ../layout

block content
  .d-flex.justify-content-between.flex-wrap.flex-md-nowrap.align-items-center.pt-3.pb-2.mb-3.border-bottom
    h1.h2 Employee Master
    .btn-toolbar.mb-2.mb-md-0
      a.btn.btn-sm.btn-outline-primary(href='/employees/create')
        i.bi.bi-plus-lg
        | Add Employee

  .card
    .card-header
      h5.mb-0 Employee List
    .card-body
      table.table.table-striped.datatable#employeeTable
        thead
          tr
            th Employee Code
            th Name
            th Email
            th Phone
            th Designation
            th Department
            th Branch
            th Status
            th Actions
        tbody
          if employees && employees.length > 0
            each employee in employees
              tr
                td= employee.employee_code
                td= employee.full_name
                td= employee.email || '-'
                td= employee.phone || '-'
                td= employee.designation || '-'
                td= employee.department || '-'
                td= employee.Branch ? employee.Branch.name : '-'
                td
                  if employee.is_active
                    span.badge.bg-success Active
                  else
                    span.badge.bg-secondary Inactive
                td
                  a.btn.btn-sm.btn-outline-primary(href=`/employees/${employee.id}`)
                    i.bi.bi-eye
                  a.btn.btn-sm.btn-outline-secondary(href=`/employees/${employee.id}/edit`)
                    i.bi.bi-pencil
                  form(action=`/employees/${employee.id}/delete`, method='POST', style='display: inline;')
                    button.btn.btn-sm.btn-outline-danger(type='submit', onclick='return confirm("Are you sure you want to delete this employee?")')
                      i.bi.bi-trash

  script.
    $(document).ready(function() {
      $('#employeeTable').DataTable({
        "pageLength": 25,
        "responsive": true,
        "order": [[ 1, "asc" ]],
        "columnDefs": [
          { "orderable": false, "targets": -1 }
        ]
      });
    });