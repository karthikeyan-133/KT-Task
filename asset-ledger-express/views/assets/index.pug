extends ../layout

block content
  .d-flex.justify-content-between.flex-wrap.flex-md-nowrap.align-items-center.pt-3.pb-2.mb-3.border-bottom
    h1.h2 Asset Master
    .btn-toolbar.mb-2.mb-md-0
      a.btn.btn-sm.btn-outline-primary(href='/assets/create')
        i.bi.bi-plus-lg
        | Add Asset

  .card
    .card-header
      h5.mb-0 Asset List
    .card-body
      table.table.table-striped.datatable#assetTable
        thead
          tr
            th Asset Code
            th Name
            th Category
            th Branch
            th Purchase Value
            th Current Value
            th Status
            th Actions
        tbody
          if assets && assets.length > 0
            each asset in assets
              tr
                td= asset.asset_code
                td= asset.name
                td= asset.AssetCategory ? asset.AssetCategory.name : '-'
                td= asset.Branch ? asset.Branch.name : '-'
                td= asset.purchase_value ? '$' + asset.purchase_value : '-'
                td= asset.current_value ? '$' + asset.current_value : '-'
                td
                  case asset.status
                    when 'stock'
                      span.badge.bg-success Stock
                    when 'issued'
                      span.badge.bg-warning Issued
                    when 'scrapped'
                      span.badge.bg-danger Scrapped
                td
                  a.btn.btn-sm.btn-outline-primary(href=`/assets/${asset.id}`)
                    i.bi.bi-eye
                  a.btn.btn-sm.btn-outline-secondary(href=`/assets/${asset.id}/edit`)
                    i.bi.bi-pencil
                  form(action=`/assets/${asset.id}/delete`, method='POST', style='display: inline;')
                    button.btn.btn-sm.btn-outline-danger(type='submit', onclick='return confirm("Are you sure you want to delete this asset?")')
                      i.bi.bi-trash

  script.
    $(document).ready(function() {
      $('#assetTable').DataTable({
        "pageLength": 25,
        "responsive": true,
        "order": [[ 0, "asc" ]],
        "columnDefs": [
          { "orderable": false, "targets": -1 }
        ]
      });
    });